>你如何从零设计一个高并发下的“优惠券发放系统”，要求：
>
>- 总量不超发（比如最多 10000 张）
>- 每个用户最多领取一次
>- 支持高并发（瞬时上万请求）
>
>请说明你的设计思路、关键数据结构、是否用缓存/锁/消息队列、是否考虑幂等性与事务，以及如何验证这个方案的正确性和鲁棒性。