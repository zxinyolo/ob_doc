> 指纹规则引擎服务需要提供高效的查询和匹配能力，核心目标是根据客户端提供的特征信息，快速、准确地在指纹库中查找命中结果。**数据库查询性能是系统的关键**，需确保低延时响应（100ms 以内）

#### 核心功能

- 接收客户端的请求
- 规则匹配
- 数据库查询
- 指纹数据采集



#### 接收客户端的请求

- **内部服务:**  根据目前的需求,指纹规则引擎不需要对外暴漏服务,只需要处理云浏览器服务(客户端)的请求

- **API交互:**  客户端通过 API 提交指纹特征，服务器返回命中的指纹信息。



#### 规则匹配

需要支持灵活的匹配规则(根据实际需求),例如:

- 完全匹配:   所有特征必须一致
- 部分匹配:   指定某些特征一致
- 模糊匹配:  允许一定的偏差
- 优先级匹配: 个别特征权重更高



#### 数据库查询

- 数据存储格式:　目前指纹信息是json形式, 需要数据库字段类型支持json

- 索引优化：
  - 对经常查询的字段建立索引
- 查询优化：
  - 避免全表查询
- 性能要求低延时(100ms以内)
- 根据目前需求不需要进行缓存数据,需要实时查询



#### 指纹数据采集

- 目前所有指纹信息是一个完整的指纹信息存储在一个json中
- 指纹入库,需要读取json再写入数据库,性能一般
- 需考虑以后多种形式指纹信息入库(如实时请求,csv文件,sql文件)



#### 错误监控

- **错误监控：**　使用 **Sentry** 进行异常跟踪，实时告警并通知